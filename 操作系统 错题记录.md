# 操作系统 错题记录
《961计算机基础综合配套习题》
- - - -
Q： 有3个进程P1、P2和P3并发工作。进程P1需用资源S3和S1；进程P2需用资源S1和S2；进程P3需用资源S2和S3。回答（北航期末考试题）
（1）若对资源分配不加限制，会发生什么情况？为什么？
（2）为保证进程正确地工作，应采用怎样的资源分配策略？为什么？

A：（1）若对资源分配不加限制，上述进程可能会进入死锁状态。因为P1、P2、P3是兵法工作的，所以完全有可能发生下述情况，此时P1获得了S3，P2获得了S1，P3获得了S2，但同时他们又循环等待下一个进程释放锁占用的资源，从而进入死锁状态。
（2）为保证进程正确地工作，可采取下列资源分配策略：
①要求进程一次性的申请它所需的全部资源。这样可破坏“请求与保持”条件。
②要求进程严格按资源号递增的顺序申请资源，即P1先申请S1，再申请S3；P2先申请S1，再申请S2; P3先申请S2，再申请S#。这样可破坏“环路等待”条件。
③当一个进程申请资源时，如果系统已无此类资源可用，但某个拥有该资源的其他进程处于阻塞状态，则允许前者抢占后者的资源。这样可破坏“不剥夺”条件。
- - - -
Q: （1）主存利用率不高主要体现为哪几种形式？
（2）可以通过哪些途径来提高主存利用率？
A:
内存利用率不高，主要有四种表现形式：
1）内存存在着大量的、分散的难以利用的碎片；
2）暂时不用或长期不能运行的程序或数据，占据了大量的存储空间；
3）当作业较大时，内存中只能装入少量的作业，当其阻塞时，将使CPU空闲，从而降低了内存利用率；
4）内存中存在着重复的拷贝。
针对上述问题，可采用以下方法提高内存利用率：
1）改连续分配方式为离散分配方式以减少内存的零头；
2）增加对换机制，将那些暂时不能运行的进程或暂不需要的程序和数据环换出至外存，以腾出内存来装入运行的进程；
3）引入动态链接机制，当程序在运行中需要调用某段程序时才将该程序装入内存，从而避免装入不会用到的程序段和数据；
4）引入虚拟存储器机制，使更多的作业能够装入内存，提高CPU和内存利用率；
5）引入存储器共享机制，允许一个正文段或数据段被若干进程共享以消除内存中的重复拷贝现象。
- - - -
Q:在采用首次适应算法回收内存时,可能出现哪几种情况?应怎么样处理这些情况?

A:
a. 回收区与插入点的前一个分区相邻接，此时可将回收区与插入点的前一分区合并，不再为回收分区分配新表项，而只修改前邻接分区的大小； 
b. 回收分区与插入点的后一分区相邻接，此时合并两区，然后用回收区的首址作为新空闲区的首址，大小为两者之和； 
c. 回收区同时与插入点的前后两个分区邻接，此时将三个分区合并，使用前邻接分区的首址，大小为三区之和，取消后邻接分区的表项； 
d. 回收区没有邻接空闲分区，则应为回收区单独建立一个新表项，填写回收区的首址和大小，并根据其首址，插入到空闲链中的适当位置.
- - - -
Q:详述在设有快表的请求分页存储管理系统中，一个虚地址转换成物理内存地址的过程。
A:当CPU给出逻辑地址后，地址变换机构自动讲逻辑地址划分成页号和页内偏移两部分。然后将页号与快表中的所有页号进行比较，若快表中由于此匹配的页号，则表示所要访问的页表项在快表中，于是取出该页对应的物理块号，与页内地址拼接形成物理地址。同时还应修改页表项中的访问位，对于写指令还需要将修改位置为1.若快表中的所有页号与所查找页号不匹配，则还需要在访问主存中的页表。若该页在主存，则从页表中取出物理块号，与页内地址拼接形成物理地址。若该页不在内存，则产生缺页中断，请求操作系统将缺页调入内存，再按前述方式进行地址变换。如果地址变换是通过查找内存中表项完成的，则还应将这次所查到的页表项存入快表中，若快表已满，则必须按某种置换算法淘汰一个表项，以腾出位置存入此页表项。
- - - -

