# Chapter04 
# 第四章 文件系统  习题
- - - -
## 知识点小记
1. 文件类型：
①普通文件：包含有用户信息的文件，分为ASCII文件和二进制文件。
②目录：管理文件系统结构的系统文件；
③字符特殊文件（UNIX）：与输入/输出有关，用于串行I/O类设备，如终端、打印机、网络等。
④块特殊文件（UNIX）：用于磁盘类设备。
2. 文件访问方式：顺序访问、随机访问。
3. 绝对路径名：由从根目录到文件的路径组成；相对路径名：所有不从根目录开始的路径名。
4. 文件系统存放在磁盘上。磁盘可划分为一个或多个分区，每个分区有一个独立的文件系统。磁盘的0号扇区称为**主引导记录**（MBR），用来引导计算机。MBR的结尾是分区表，该表给出了每个分区的**起始和结束地址**。
5. 计算机被引导时，BIOS读入并执行MBR。MBR做的第一件事是确定活动分区，读入它的第一个块—“引导块”。
6. 文件存储的实现：
①连续分配。优点：实现简单；读操作性能较好。缺点：随时间推移会产生大量碎片。
②链表分配。优点：可以充分利用每个磁盘块，不会因为磁盘碎片而浪费存储空间；顺序读取文件方便。缺点：随机访问相当缓慢；由于指针占去了一些字节，每个磁盘块存储数据的字节数不再是2的整数次幂，降低了系统效率。
③采用内存中的表进行链表分配。把之前每个磁盘块的指针字放在内存中的一个表（文件分配表FAT）中，就可以解决上述链表的两个不足。缺点：必须把整个表放在内存中，如果磁盘块很多，表占用的空间会很大，此时该方法并不实用，不能较好地扩展并应用于大型磁盘中。
7. 用i节点记录各个文件分别包含哪些磁盘块。文件打开时，其i节点才在内存中。
8. 目录系统的主要功能是把ASCII文件名映射成定位文件数据所需的信息。操作系统利用用户给出的路径名找到相应目录项。目录项中提供了查找文件磁盘块所需要的信息。
9. 文件属性存储的位置：①**直接放在目录项中**，目录中有一个固定大小的目录项列表，每个文件对应一项，其中包括一个固定长度的文件名、一个文件属性的结构体以及说明磁盘位置的一个或多个磁盘地址；②把文件属性存放**在i节点**中，这是目录项会更短：只有文件名和i节点号。第二种方法更好。
10. 日志结构文件系统LFS、日志文件系统、虚拟文件系统VFS。
11. 虚拟文件系统，抽象出所有文件系统共有的部分，并将这部分代码放在单独的一层，该层调用底层的实际文件系统来具体管理数据。绝大多数UNIX采用VFS。
12. 
